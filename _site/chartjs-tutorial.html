<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	  <meta name="author" content="Miguel Paz" />
    <meta name="description" content="Courses, tools, tutorial, classes, events and other stuff">
    <link rel="favicon" href="static/img/favicon.png">

    
      <title>Making a bar chart with ChartJS</title>
    

    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ=="
    crossorigin="anonymous">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

	<!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="static/css/main.css" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old" />
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />
  <link rel="stylesheet" type="text/css" href="static/css/syntax.css" />

    <!-- Google Analytics -->
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');

</script>
  </head>
  <!-- Main Body-->
  <body>
  <!-- Wrap all page content here -->
  <div id="wrap">
    <!-- Navbar header -->
    <nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="http://miguelpaz.github.io"><i class="fa fa-home"></i></a>
    </div>
    <div id="navbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="blog.html">BLOG</a></li>
        <li><a href="projects.html">PROJECTS</a></li>
        <li><a href="https://www.linkedin.com/in/miguelpaz">RESUME</a></li>
      </ul>
    </div>
  </div>
</nav>


    <div class="container">
	<div class="blog-post">
		<h3 id="title_main">
		  <strong>Making a bar chart with ChartJS</strong>
		</h3>
	</div>
	<div class="blog-title">
		<h4>
		May 29, 2016
			&nbsp;&nbsp;
			
			 <span class="label label-success">Courses</span>
			
			 <span class="label label-success">Tutorials</span>
			
		</h4>
	</div>
	<div class="panel panel-default">
		<div class="panel-body">
			<div class="blogpost">
			  <p><a href="http://www.chartjs.org/">ChartJS</a> is an easy to use, free javascript library to create interactive line and bar charts with very little code. As most similar tools, it is based in the D3.js library. It was developed by <a href="https://github.com/chartjs/Chart.js/graphs/contributors">several people</a>.</p>

<p>Like <a href="https://github.com/miguelpaz/jlab/blob/master/morris_charts.md">MorrisJS</a>, the advantage of using this library is that you can customize a lot of aspects of your graphic using just one function and a few <a href="http://www.chartjs.org/docs/">well-documented</a> configuration options.</p>

<p>It is a little bit more complex than Morris, but it has a few competitive advantages. First, it is built by several people, so it is regularly updated. There are more chart types and is built to be responsive in mobile right from the start. Beyond all that, for the data geeks, it also offers logarithmic or even entirely custom scales with ease. Not being enough, ChartJS is very lightweight (~31kB).</p>

<p>One disadvantage is that the json data must have some specific properties that it understands, like <code class="highlighter-rouge">labels</code> and <code class="highlighter-rouge">data</code>, so you have to adapt all your dataset. Because of this, however, the tool allows advanced users to perform more customizations.</p>

<p>In this tutorial, you will need to access:</p>

<ol>
  <li><a href="https://github.com/miguelpaz/jlab/blob/master/data/chartjs_example_data_short.json">The example json data</a></li>
  <li><a href="https://cdnjs.com/libraries/Chart.js">The ChartJS library CDN link</a> - (<em>this will give access to the code</em>)</li>
  <li><a href="http://www.chartjs.org/docs/#bar-chart">The configuration options’ page</a> (<em>where you will chose the specs for the graphic</em>)</li>
  <li>And a code editor - preferably an online one where you will see the results in real time. This example will use <a href="https://jsbin.com">JSbin</a>, but you can use <a href="http://codepen.io/">Codepen</a> our <a href="https://jsfiddle.net/">JSfiddle</a> as alternatives.</li>
</ol>

<hr />

<h2 id="starting-point">Starting point</h2>

<p>Open JSbin. Notice that there will be some HTML code there already, saving you the trouble of adding some tags.</p>

<p>Open another tab in your browser and go to the <a href="https://cdnjs.com/libraries/Chart.js">ChartJS CDN page</a>. Copy and paste the one line of code - <code class="highlighter-rouge">&lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js"&gt;&lt;/script&gt;</code> -  in the <code class="highlighter-rouge">&lt;head&gt;</code> of your [document][you can also put it in the <code class="highlighter-rouge">&lt;body&gt;</code> tag, but it loads first if it is in the <code class="highlighter-rouge">&lt;head&gt;</code>].</p>

<p>Your code will look like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	<span class="cp">&lt;!DOCTYPE html&gt;</span>
	<span class="nt">&lt;html&gt;</span>
	<span class="nt">&lt;head&gt;</span>
	  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
	  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width"</span><span class="nt">&gt;</span>
	  <span class="nt">&lt;title&gt;</span>This is a bar chart with ChartJS<span class="nt">&lt;/title&gt;</span>

	  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

	<span class="nt">&lt;/head&gt;</span>
	<span class="nt">&lt;body&gt;</span>

	  <span class="nt">&lt;canvas</span> <span class="na">id=</span><span class="s">"myChart"</span> <span class="na">width=</span><span class="s">"400"</span> <span class="na">height=</span><span class="s">"300"</span><span class="nt">&gt;&lt;/canvas&gt;</span>


	<span class="nt">&lt;/body&gt;</span>
	<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<p>Now that we have the main library loaded the <code class="highlighter-rouge">&lt;head&gt;</code> of our code (where nothing will be displayed in the screen), we have to proceed to the <code class="highlighter-rouge">&lt;body&gt;</code> tag.</p>

<p>Instead of a <code class="highlighter-rouge">&lt;div&gt;</code>, ChartJS uses the <code class="highlighter-rouge">&lt;canvas&gt;</code> tag.</p>

<p>Add the following code inside the <code class="highlighter-rouge">&lt;body&gt;</code> tag:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  &lt;canvas id="myChart" width="400" height="400"&gt;&lt;/canvas&gt;
</code></pre>
</div>

<p>This will actually call (make appear) the chart once we put the javascript in it. We will modify this tag a little bit later, so don’t worry right now about it.
___</p>

<h2 id="adding-the-javascript">Adding the javascript</h2>

<p>Our next step is to add some javascript code so it can retrieve the charting libraries from those tags we included to the <code class="highlighter-rouge">&lt;head&gt;</code> earlier.</p>

<p>ChartJS’ way of “calling” the line chart is fairly simple. Just:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var ctx = document.getElementById("myChart");
</code></pre>
</div>

<p>Now, we have to add the variable that will bind the data and allow us to customize it. We will use dummy data now. Go ahead and add the following code into the javascript:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	var myChart = new Chart(ctx, {
type: 'bar',
data: {
    labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
    datasets: [{
        label: 'Those are colors',
        data: [12, 19, 3, 5, 2, 3]
    }]
},
});
</code></pre>
</div>

<p>You will now be able to see a small chart some bars.</p>

<p><img src="https://github.com/miguelpaz/jlab/blob/master/images/chart_chartjs_1.png?raw=true" alt="*Your basic chart with ChartJS*" /></p>

<hr />

<h2 id="adding-your-own-data">Adding your own data</h2>

<p>In your javascript input, you might have noticed the <strong>data</strong> line. That is where your chart’s lines are coming from. That field is where you <strong>bind</strong> the data! ChartJS uses json format, but it has its own specifications as how to structure data, which at first may be not so straightforward, but allows the tool to have more customization[^More advanced users can use JQuery to parse json and .csv files].</p>

<p>Lets use as example this <a href="https://github.com/miguelpaz/jlab/blob/master/data/chartjs_example_data_short.json">simple dataset</a>, which show us the 2014 per capita GDP of seven countries.</p>

<p>Copy and past the text after the <code class="highlighter-rouge">dataset:</code> in your javascript. It will result in something like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	data: {
    labels: ["Brazil", "China", "India", "Russia", "South Africa", "United Kingdom", "United States"],
    datasets: [
					  {
					    label: "GDP per capita",
					    data: [11726.8, 7590.0, 1581.5, 12735.9, 6483.9, 46297.0, 54629.5 ]
					  }
					  ]
					    },
</code></pre>
</div>

<p>The bar chart will immediately appear in your screen with ChartJS default looks. It is also interactive.</p>

<p>There are some things to understand here so you can work with other data afterwards. In this case:</p>

<ul>
  <li>The X axis is defined by the <code class="highlighter-rouge">labels</code> array;</li>
  <li>The Y axis is plotted by the <code class="highlighter-rouge">data</code> field inside the <code class="highlighter-rouge">dataset</code> array;</li>
  <li>The actual legend/unit is defined by the <code class="highlighter-rouge">label</code> inside the <code class="highlighter-rouge">dataset</code> array;</li>
</ul>

<p>The new plotted chart will look like this:</p>

<p><img src="https://github.com/miguelpaz/jlab/blob/master/images/chart_chartjs_2.png?raw=true" alt="*ChartJS graph*" /></p>

<hr />

<h2 id="customizing-your-graphic">Customizing your graphic</h2>

<p>To add some good-looking visual to your graphic, we will now use some options ChartJS has to offer to change fonts, colors and other specifications. We will also use some CSS to give it a title, a legend, units and a source - all good practices when charting.</p>

<h3 id="colors">Colors</h3>

<p>Lets start with by coloring our chart, especially the bars.</p>

<p>This more basic color configuration is applied, generally, within the <code class="highlighter-rouge">dataset</code> array. See the code below.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	datasets: [
				  {
	            label: "GDP per capita",
	            backgroundColor: "",
	            borderColor: "",
	            borderWidth: 1,
	            hoverBackgroundColor: "",
	            hoverBorderColor: "",            
	            data: [11726.8, 7590.0, 1581.5, 12735.9, 6483.9, 46297.0, 54629.5 ]
	            }
</code></pre>
</div>

<ul>
  <li>Lets apply the color red <code class="highlighter-rouge">#c00</code> here, using both the Hex color and Rgba (to get transparency). To convert Hex to Rgba, use <a href="http://hex2rgba.devoth.com/">this tool</a>.</li>
  <li>To have some clear delimitation of the bar area, lets add a solid red <code class="highlighter-rouge">#c00</code> border, of 2px;</li>
  <li>For the hover, lets add some nice dark solid blue, to emphasize the bar we are in. Add: <code class="highlighter-rouge">#59597F</code> to that field, and cut out the hover border color, since we don’t need it;</li>
</ul>

<p>So far out code looks like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	var myChart = new Chart(ctx, {
type: 'bar',
data: {
    labels: ["Brazil", "China", "India", "Russia", "South Africa", "United Kingdom", "United States"],
    datasets: [
	  {
	            label: "GDP per capita",
	    backgroundColor: "rgba(204, 0, 0, .4)",
	            borderColor: "#c00",
	            borderWidth: 2,
	            hoverBackgroundColor: "#59597F",            
	            data: [11726.8, 7590.0, 1581.5, 12735.9, 6483.9, 46297.0, 54629.5 ]
	  }
	  ]
	  }
</code></pre>
</div>

<p>The result for now is this:</p>

<p><img src="https://github.com/miguelpaz/jlab/blob/master/images/chart_chartjs_4.png?raw=true" alt="Chartjs chart" /></p>

<hr />

<h3 id="customization">Customization</h3>

<p>After you input your data and added the basic color visuals, there are plenty of more things you could do. But first, you have to add the <code class="highlighter-rouge">options</code> config. <a href="http://www.chartjs.org/docs/#getting-started-global-chart-configuration">You can check all the ChartJS options here</a>.</p>

<p>After the end of your data, when you closed it with a comma, lets add this small line of code <code class="highlighter-rouge">options: {}</code>.</p>

<p>You code will look like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  var ctx = document.getElementById("myChart").getContext("2d");


	var myChart = new Chart(ctx, {
	    type: 'bar',
	    data: {
	        labels: ["Brazil", "China", "India", "Russia", "South Africa", "United Kingdom", "United States"],
	        datasets: [
					  {
	            label: "GDP per capita",
	    backgroundColor: "rgba(204, 0, 0, .4)",
	            borderColor: "#c00",
	            borderWidth: 2,
	            hoverBackgroundColor: "#59597F",         
	            data: [11726.8, 7590.0, 1581.5, 12735.9, 6483.9, 46297.0, 54629.5 ]
					  }
								  ]
				    },
	    options: {
								}
	});
</code></pre>
</div>

<p>Now, we are ready to add some other customizations here, like fonts, grids and other cool stuff.</p>

<hr />
<p>##### Interlude to get a font
Go to <a href="https://www.google.com/fonts">Google Fonts</a> to fetch some nice typography. We will use <a href="https://www.google.com/fonts#QuickUsePlace:quickUse"><em>Roboto</em></a> - make sure you select the light (400) and bold (700) types of font (for body and header).</p>

<p>If you want Roboto, copy and paste this link into the <code class="highlighter-rouge">&lt;head&gt;</code> of your HTML: <code class="highlighter-rouge">&lt;link href='https://fonts.googleapis.com/css?family=Roboto:400,700' rel='stylesheet' type='text/css'&gt;</code></p>

<hr />

<p>Lets add some smooth animation right out of the box, so your chart get even more atention. Lets add a 3 seconds (or 3,000 milliseconds) animation: <code class="highlighter-rouge">animation: {duration: 3000},</code></p>

<p>Now, lets configure the <code class="highlighter-rouge">scale</code>, where the better part of certain charts is. First, the <code class="highlighter-rouge">yAxes: [ { } ]</code>. Inside it, simply add one <code class="highlighter-rouge">display: true</code> - nothing happens, but you will see later why we did it.</p>

<p>Now, still inside the <code class="highlighter-rouge">yAxes</code>, add the <code class="highlighter-rouge">ticks: {}</code>, followed by the following configs:</p>

<ul>
  <li><code class="highlighter-rouge">beginAtZero: true,</code> - this will tell your chart to start a zero, which is often the case, unless your baseline is different;</li>
  <li><code class="highlighter-rouge">fontFamily: 'Roboto',</code> - don’t forget the font’s link in the <code class="highlighter-rouge">&lt;head&gt;</code>;</li>
  <li><code class="highlighter-rouge">fontSize: 14,</code> - in pixels;</li>
  <li><code class="highlighter-rouge">fontColor: '#ababab',</code> - make it gray;</li>
</ul>

<p>As you can see, the Y axis numbers are not the best to show the data, without the commas. There are plenty of ways to use javascript to manipulate that number. We will make something easy, almost prosaic - trick the code to show the same number, but differently.</p>

<p>Lets add a javascript <code class="highlighter-rouge">function</code> to do that, using the <code class="highlighter-rouge">callback</code> option:</p>

<p><code class="highlighter-rouge">callback: function(value) { return value/1000 + ',000' + '$'; },</code></p>

<p>What we did here was to divide the original format by 1,000 and then add the zeroes again with a comma, plus the dollar sign. This happens because you cannot input comma in a data that is separated by another comma, as the code will read a different number - for instance: 10,000 would read 10 and 000, not 10000. Now it looks better.</p>

<p>Your <code class="highlighter-rouge">yAxes</code> code should be the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>		yAxes: [{
			  display: true,                
			  ticks: {
				beginAtZero: true,
				fontFamily: 'Roboto',
				fontSize: 14,
				fontColor: '#ababab',
				callback: function(value) { return value/1000 + ',000' + '$'; },
				},
		    }],
</code></pre>
</div>

<p>Let’s do basically the same thing with the <code class="highlighter-rouge">xAxes</code>, but this time, lets make our chart cleaner. Assign <code class="highlighter-rouge">gridLines: {display: false},</code> to hide the vertical gridlines.</p>

<p>This is the code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>		xAxes: [{
		    gridLines: {
		    display: false
				},
		    ticks: {
		    fontFamily: "Roboto",
		    fontSize: 14,
				},     
	      }],
</code></pre>
</div>

<p>Before we finish, lets make sure our chart is responsive, by adding <code class="highlighter-rouge">responsive: true,</code> before closing the <code class="highlighter-rouge">options</code> config.</p>

<p>Finally, lets credit the data in the HTML, after the <code class="highlighter-rouge">&lt;canvas&gt;</code> tag. Add the source: <code class="highlighter-rouge">&lt;h5&gt;Source: World Bank&lt;/h5&gt;</code>, as well as some basic CSS, to make it look better.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	body {
	  padding: 0px 20px 10px 30px;
	  font-family: 'Roboto', sans-serif;
	}

	p {
		line-height: 1.4em;
		}

	h5 {
	  border-top: 1px solid #000;
	  display: inline;
	  font-weight: 400;
	}
</code></pre>
</div>

<h3 id="result">Result</h3>

<p>Your chart will now look like this:</p>

<p><img src="https://github.com/miguelpaz/jlab/blob/master/images/chart_chartjs_3.png?raw=true" alt="ChartJS chart" /></p>

<hr />

<h4 id="check-out-the-code">Check out the code</h4>

<p><a href="https://jsbin.com/hopeze/edit?html,css,js,output">Find the code here, in this JSbin.</a></p>

<h4 id="be-a-pro">Be a pro</h4>

<p>If you feel you are ready for more, try “breaking” your chart’s code so it is easier to read and manipulate. This takes more time to learn, but it is sure worth your while in the long run if you want to dig deeper.</p>

<p><a href="https://jsbin.com/donapi/edit?html,js,output">The new code is here, in this JSbin.</a></p>

			   <hr>
			   <div class="related-posts">
				   <h5>Related Posts</h5>
				   
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	June  6, 2016
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="/googlesheets-basics.html">Using formulas for strings in Google Sheets</a></strong>
								 </h6>
							 </div>
						</div>
					
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	June  5, 2016
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="/commandline-basics.html">Basic command line shortcuts</a></strong>
								 </h6>
							 </div>
						</div>
					
						<div class="row">
							 <div class="col-sm-4 col-md-4 col-lg-4">
								 <h6 style="text-align: right">
								 	June  5, 2016
								 </h6>
							 </div>
							 <div class="col-sm-8 col-md-8 col-lg-8">
								 <h6 style="text-align: left">
								 	<strong><a href="/cartodb-basics.html">Making a chart in CartoDB without geolocation data</a></strong>
								 </h6>
							 </div>
						</div>
					
			   </div>
			</div>
		</div>
	</div>
	

</div>


  </div>
  <!-- Footer -->
  <footer>
    <div id="footer">

        <div class="container">
            <p class="text-muted">2016</p>
        </div>
    </div>
</footer>
<div class="footer"></div>



    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"
    integrity="sha256-Sk3nkD6mLTMOF0EOpNtsIry+s1CsaqQC1rVLTAy+0yc= sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ=="
    crossorigin="anonymous"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="static/js/docs.min.js"></script>
    <script src="static/js/main.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="static/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
